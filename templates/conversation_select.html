<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Choose Conversation - Your Hindi Tutor</title>
    
    <link rel="stylesheet" href="/static/css/mobile-design-system.css">
    <script src="/static/js/mobile-navigation.js" defer></script>
</head>
<body>
    <div class="app-container">
        <!-- Top Bar with Profile Only -->
        <header class="mobile-top-bar">
            <!-- Profile avatar will be inserted here by JavaScript -->
        </header>
        
        <!-- Main Content -->
        <main class="mobile-main-content">
            <div class="mobile-card">
                <div class="text-center mb-lg">
                    <h1 class="font-bold text-primary" style="font-size: 2.5rem; margin-bottom: 0.5rem;">Choose Your Adventure!</h1>
                    <p class="text-medium" style="font-size: 1.2rem;">What would you like to talk about today?</p>
                </div>
                
                <div class="child-greeting mb-xl" style="background: #f0fdf4; border-radius: 1rem; padding: 1.5rem; border-left: 4px solid var(--primary-green);">
                    <div class="font-semibold text-primary" style="font-size: 1.3rem;">‡§®‡§Æ‡§∏‡•ç‡§§‡•á <span id="childName">...</span>! üëã</div>
                    <div class="text-medium mt-xs" style="font-size: 1.1rem;">Let's practice Hindi together through fun conversations!</div>
                </div>
                
                <div class="conversation-options-grid">
                    <a href="/conversation?type=everyday" class="conversation-option-card fade-in-up" data-type="everyday">
                        <div class="option-tag">Popular</div>
                        <div class="option-icon">üè†</div>
                        <div class="option-title">Everyday Life</div>
                        <div class="option-description">
                            Talk about your day, school, friends, and daily activities. Perfect for learning practical Hindi!
                        </div>
                    </a>
                    
                    <a href="/conversation?type=cartoons" class="conversation-option-card fade-in-up" data-type="cartoons" style="animation-delay: 0.2s;">
                        <div class="option-tag">Fun</div>
                        <div class="option-icon">üé≠</div>
                        <div class="option-title">Favorite Cartoons</div>
                        <div class="option-description">
                            Chat about your favorite cartoon characters, shows, and stories. Let's make Hindi fun!
                        </div>
                    </a>
                    
                    <a href="/conversation?type=adventure_story" class="conversation-option-card fade-in-up" data-type="adventure_story" style="animation-delay: 0.4s;">
                        <div class="option-tag">Creative</div>
                        <div class="option-icon">üó∫Ô∏è</div>
                        <div class="option-title">Adventure Story</div>
                        <div class="option-description">
                            Create exciting adventure stories together in simple Hindi! Explore new places and meet interesting characters.
                        </div>
                    </a>
                    
                    <a href="/conversation?type=mystery_story" class="conversation-option-card fade-in-up" data-type="mystery_story" style="animation-delay: 0.6s;">
                        <div class="option-tag">Detective</div>
                        <div class="option-icon">üîç</div>
                        <div class="option-title">Mystery Story</div>
                        <div class="option-description">
                            Solve fun mysteries and create detective stories in simple Hindi! Find clues and solve puzzles together.
                        </div>
                    </a>
                </div>
            </div>
        </main>
        
        <!-- Bottom Navigation will be inserted here by JavaScript -->
    </div>

    <script>
        // Page-specific initialization
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // Get user info to display child name
                const response = await fetch('/api/user');
                if (!response.ok) {
                    window.location.href = '/';
                    return;
                }
                
                const user = await response.json();
                if (!user.child_name) {
                    window.location.href = '/profile-setup';
                    return;
                }
                
                // Update child name in greeting
                const childNameEl = document.getElementById('childName');
                if (childNameEl) {
                    childNameEl.textContent = user.child_name;
                }
                
                // Update page title
                document.title = `Choose Conversation - ${user.child_name}`;
                
            } catch (error) {
                console.error('Error loading user info:', error);
                window.location.href = '/';
            }
        });

        // Add click tracking for analytics
        document.addEventListener('click', function(e) {
            const conversationCard = e.target.closest('.conversation-option-card');
            if (conversationCard) {
                const type = conversationCard.getAttribute('data-type');
                
                // Track the selection (you can add analytics here)
                console.log(`Selected conversation type: ${type}`);
                
                // Add loading state
                conversationCard.style.opacity = '0.8';
                conversationCard.style.transform = 'translateY(2px)';
                
                // Add transition effect
                MobilePageUtils.showPageTransition();
            }
        });
    </script>
</body>
</html>